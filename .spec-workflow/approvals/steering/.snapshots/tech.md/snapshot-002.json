{
  "id": "snapshot_1762753093654_iqr6bxr18",
  "approvalId": "approval_1762753060185_113ubf5c1",
  "approvalTitle": "Technology Stack & Architecture - tech.md",
  "version": 2,
  "timestamp": "2025-11-10T05:38:13.654Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Technology Stack\n\n## Project Type\n\n**Web Application** - 現代化的 Nuxt 4 全端 Web 應用，支援多種渲染模式（SSR、SSG、SPA），專為企業級專案與 Figma 轉代碼工作流程設計。\n\n## Core Technologies\n\n### Primary Language(s)\n\n- **Language**: TypeScript 5.9+\n- **Runtime**: Node.js (透過 Nuxt/Nitro)\n- **Browser Target**: ES Next（透過 Nitro esbuild 配置）\n- **Language-specific tools**:\n  - **Package Manager**: Yarn 4.8.0 (Berry)\n  - **Type Checker**: vue-tsc 3.1+\n  - **Build Tool**: Vite 7.1+ (Nuxt 內建)\n  - **Server Engine**: Nitro (Nuxt 伺服器引擎)\n\n### Key Dependencies/Libraries\n\n#### Framework & Core\n- **Nuxt 4.2**: 全端 Vue 框架，提供 SSR、SSG、檔案式路由、自動導入等功能\n- **Vue 3.5**: 漸進式 JavaScript 框架，提供響應式 UI 開發能力\n- **Vue Router 4.5**: 官方路由管理器（Nuxt 自動配置）\n\n#### UI & Styling\n- **Tailwind CSS v4.0**: Utility-first CSS 框架\n  - 整合方式：`@tailwindcss/postcss` (PostCSS plugin)\n  - 配置：`tailwind.config.ts` 定義主題與內容路徑\n  - Dark Mode: Class-based (`class` strategy)\n  - 自定義字體：DM Sans、DM Serif Display、DM Mono\n- **SASS 1.89**: CSS 預處理器，支援進階樣式開發\n- **@nuxtjs/color-mode 3.5**: 深色模式管理（class-based）\n\n#### State Management & Utilities\n- **Pinia 3.0**: 輕量型狀態管理，完整 TypeScript 支援\n  - 整合：`@pinia/nuxt` 自動設置與 auto-imports\n- **VueUse 14.0**: 組合式 API 工具集合\n  - 整合：`@vueuse/nuxt` 提供自動導入\n- **Lodash 4.17**: JavaScript 工具函式庫\n- **Day.js 1.11**: 輕量日期時間處理庫\n\n#### PWA & Device Support\n- **@vite-pwa/nuxt 1.0**: PWA 支援\n  - Service Worker 自動生成\n  - Workbox 配置快取策略\n  - 支援 App Manifest\n  - 開發模式可選啟用 (`VITE_PLUGIN_PWA=true`)\n- **@nuxtjs/device 3.2**: 裝置偵測（mobile/tablet/desktop）\n\n#### Internationalization\n- **@nuxtjs/i18n 9.5**: 國際化與多語系支援\n  - Vue I18n 整合\n  - 自動路由本地化\n  - SEO 友善的語言切換\n\n#### Icons & Assets\n- **unplugin-icons 22.1**: 圖標自動導入\n- **@iconify-json/material-symbols 1.2**: Material Symbols 圖標集\n\n#### Auto-imports\n- **unplugin-vue-components 28.4**: Vue 元件自動導入\n\n### Application Architecture\n\n**Feature-based Modular Architecture** 結合 Nuxt 檔案式路由系統：\n\n#### 架構特點\n- **關注點分離**：UI (components)、邏輯 (composables)、狀態 (store)、API (api) 明確分離\n- **模組化設計**：每個 feature 包含其所有相關代碼，降低耦合\n- **檔案式路由**：透過 `app/pages/` 目錄自動生成路由\n- **自動導入**：元件、composables、utils 無需手動 import\n- **型別安全**：全面 TypeScript 支援，包含 typed pages (實驗性功能)\n\n#### 核心層次\n1. **Features Layer** (`app/features/`)\n   - 功能模組封裝（如 auth、members）\n   - 每個模組包含：pages、components、composables、store、api、types、tests\n\n2. **Shared Layer** (`app/shared/`)\n   - 跨功能共用程式碼\n   - 包含：components、composables、services、utils、types\n\n3. **Pages Layer** (`app/pages/`)\n   - Nuxt 檔案式路由頁面\n   - 從 features 導入並組合頁面元件\n\n4. **Layouts Layer** (`app/layouts/`)\n   - 頁面版型模板\n\n5. **Configuration Layer** (`app/config/`, `app/constants/`)\n   - 應用配置與常數定義\n\n### Data Storage\n\n本專案主要作為前端起始模板，不包含後端資料存儲，但支援：\n\n- **Client-side State**: Pinia stores（記憶體存儲）\n- **Browser Storage**:\n  - LocalStorage/SessionStorage（透過 VueUse）\n  - IndexedDB（透過 PWA/Service Worker 快取）\n- **Server State**:\n  - 需整合 API 層（`app/features/*/api/`）\n  - 支援 Nuxt Server API routes（`/server/api/`）\n\n### External Integrations\n\n#### API 整合模式\n- **RESTful API**: 透過 `app/features/*/api/` 模組封裝\n- **GraphQL**: 可整合（需額外配置）\n- **WebSocket**: 可透過 VueUse 或自定義服務整合\n\n#### 預期整合點\n- **Authentication APIs**: 在 `app/features/auth/api/` 實現\n- **Backend Services**: 透過 Nuxt server middleware 或 API routes proxy\n- **Third-party Services**: Google Fonts（已配置 PWA 快取）\n\n### Monitoring & Dashboard Technologies\n\n#### Development Environment\n- **Nuxt DevTools 3.0 beta**:\n  - 即時開發監控\n  - 效能分析\n  - 元件檢查器\n  - Payload 分析\n\n#### Real-time Communication\n- **Vite HMR**: Hot Module Replacement 即時模組更新\n- **File Watchers**: 自動重新編譯與瀏覽器更新\n\n#### State Management\n- **Pinia DevTools**: 狀態追蹤與時間旅行除錯\n- **Vue DevTools**: 元件樹與狀態檢查\n\n## Development Environment\n\n### Build & Development Tools\n\n- **Build System**:\n  - **Vite 7.1+**: 現代化前端建置工具\n    - 極速冷啟動（ES modules）\n    - 即時 HMR\n    - 優化的生產建置\n  - **Nitro**: Nuxt 伺服器引擎\n    - Universal deployment\n    - API routes\n    - Prerendering\n    - 多平台輸出（Node.js、Vercel、Netlify 等）\n\n- **Package Management**:\n  - **Yarn 4.8.0** (Berry)\n    - Plug'n'Play (PnP) 模式\n    - Zero-installs 支援\n    - Workspace 管理\n\n- **Development Workflow**:\n  - **Hot Reload**: Vite HMR 即時更新\n  - **Watch Mode**: 自動監聽檔案變更\n  - **Dev Server**: `nuxt dev` 啟動開發伺服器（預設 port 3000）\n  - **PWA Dev Mode**: 可選啟用 (`yarn dev:pwa`)\n\n### Code Quality Tools\n\n#### Static Analysis\n- **ESLint 9.38+**: JavaScript/TypeScript 程式碼檢查\n  - **@nuxt/eslint 1.9**: Nuxt 官方 ESLint 配置\n  - **typescript-eslint 8.20**: TypeScript 語法檢查\n  - **eslint-plugin-prettier 5.2**: Prettier 整合\n  - 自定義規則：\n    - Import order 排序（按 builtin → external → internal → parent → sibling → index → object → type）\n    - Vue 元件命名規則（pages/layouts 可單字）\n    - 多行三元運算符允許\n\n#### Formatting\n- **Prettier 3.4**: 統一程式碼格式化\n  - 整合至 ESLint（`eslint-plugin-prettier`）\n  - 支援 TypeScript、Vue、JSON、Markdown、YAML\n  - Lint-staged 自動格式化\n\n#### Type Checking\n- **TypeScript 5.9+**: 靜態型別檢查\n  - **vue-tsc 3.1**: Vue 單檔元件型別檢查\n  - 配置：繼承自 `.nuxt/tsconfig.json`（Nuxt 自動生成）\n  - **Experimental Features**:\n    - `typedPages: true` - 型別安全的頁面路由\n\n#### Testing Framework\n*目前未配置，建議整合：*\n- **Vitest**: 單元測試（Vite 原生支援）\n- **Playwright**: E2E 測試（已有 MCP 整合基礎）\n- **@vue/test-utils**: Vue 元件測試\n\n#### Documentation\n- **Markdown**: README.md 專案文檔\n- **TypeScript JSDoc**: 程式碼內註解\n- *建議整合 Storybook 用於元件文檔*\n\n### Version Control & Collaboration\n\n- **VCS**: Git\n- **Branching Strategy**: *由團隊決定（建議 GitHub Flow 或 Git Flow）*\n- **Code Review Process**:\n  - Git Hooks 自動化檢查（透過 Husky）\n  - Pre-commit hooks（lint-staged）：\n    - `*.{js,ts,vue}` → ESLint auto-fix\n    - `*.{json,md,yml,yaml}` → Prettier format\n\n#### Git Hooks (Husky 9.1 + lint-staged 15.5)\n```\nPre-commit:\n1. 對暫存的 JS/TS/Vue 檔案執行 ESLint --fix\n2. 對暫存的 JSON/Markdown/YAML 執行 Prettier --write\n3. 只有通過檢查才允許提交\n```\n\n### Dashboard Development\n\n#### Live Reload\n- **Vite HMR**: 毫秒級模組熱替換\n- **Nuxt Auto-reload**: 配置變更自動重啟\n\n#### Port Management\n- **Default Port**: 3000\n- **Configurable**: 可透過環境變數或 `nuxt.config.ts` 調整\n\n#### Multi-Instance Support\n- 支援同時運行多個 Nuxt 專案（不同 port）\n- Nuxt DevTools 可管理多個實例\n\n## Deployment & Distribution\n\n### Target Platform(s)\n\n#### 多種部署模式（由 Nitro 提供）\n1. **Universal (SSR)**: 伺服器端渲染\n   - 平台：Node.js、Vercel、Netlify、CloudFlare Workers\n   - 優點：SEO 友善、首屏載入快\n\n2. **Static (SSG)**: 靜態網站生成\n   - 指令：`yarn generate`\n   - 平台：任何靜態託管（Netlify、Vercel、GitHub Pages、S3）\n   - 優點：極速載入、低成本、高安全性\n\n3. **SPA**: 單頁應用\n   - 配置：`ssr: false`\n   - 平台：任何 Web 伺服器\n\n4. **Hybrid**: 混合渲染（部分 SSR、部分靜態）\n   - Route Rules 配置個別頁面策略\n\n### Distribution Method\n\n- **Development**: `yarn dev` - 本地開發伺服器\n- **Preview**: `yarn preview` - 預覽生產建置\n- **Production Build**:\n  - `yarn build` - Universal 建置\n  - `yarn generate` - 靜態生成\n- **Deployment**:\n  - 一鍵部署至 Vercel/Netlify（透過 Git integration）\n  - Docker 容器化（需自行配置）\n  - 傳統伺服器（Node.js 環境）\n\n### Installation Requirements\n\n#### Development\n- **Node.js**: 18.x+ 或 20.x+\n- **Package Manager**: Yarn 4.8.0（或 npm/pnpm）\n- **OS**: macOS、Linux、Windows（WSL 建議）\n\n#### Production\n- **Node.js**: 18.x+ (Universal mode)\n- **Static Hosting**: 任何 Web 伺服器（SSG mode）\n- **Browser Support**: 現代瀏覽器（ES2020+）\n\n### Update Mechanism\n\n- **PWA Updates**:\n  - `registerType: 'autoUpdate'` - 自動更新 Service Worker\n  - `cleanupOutdatedCaches: true` - 清理舊快取\n- **Dependency Updates**: 透過 Yarn 管理\n- **Resolutions**: 鎖定關鍵套件版本（`package.json` resolutions 欄位）\n\n## Technical Requirements & Constraints\n\n### Performance Requirements\n\n- **開發模式啟動時間**: < 10 秒（冷啟動）\n- **HMR 更新時間**: < 100ms（單模組）\n- **生產建置時間**: < 2 分鐘（中小型專案）\n- **首次內容繪製 (FCP)**: < 1.5 秒\n- **最大內容繪製 (LCP)**: < 2.5 秒\n- **累積版面配置位移 (CLS)**: < 0.1\n- **首次輸入延遲 (FID)**: < 100ms\n- **Bundle Size**: 初始 JS < 200KB (gzipped)\n\n### Compatibility Requirements\n\n#### Platform Support\n- **Browsers**:\n  - Chrome/Edge 90+\n  - Firefox 88+\n  - Safari 14+\n  - iOS Safari 14+\n  - Chrome Android\n- **Node.js**: 18.x, 20.x, 22.x\n- **Operating Systems**:\n  - macOS (Apple Silicon & Intel)\n  - Linux (Ubuntu 20.04+, Debian 11+)\n  - Windows 10/11 (WSL2 建議)\n\n#### Dependency Versions\n- **Nuxt**: 4.2.0（鎖定在 resolutions）\n- **Vue**: 3.5+\n- **TypeScript**: 5.9+\n- **Tailwind CSS**: 4.x\n- **Vite**: 7.1+（透過 resolutions 鎖定）\n\n#### Standards Compliance\n- **ECMAScript**: ES2020+ (target: esnext)\n- **CSS**: CSS3、CSS Grid、Flexbox\n- **HTML**: HTML5\n- **PWA**: Web App Manifest、Service Worker API\n- **Accessibility**: WCAG 2.1（建議遵循）\n\n### Security & Compliance\n\n#### Security Requirements\n- **CSP (Content Security Policy)**: 可透過 Nuxt config 配置\n- **HTTPS**: 生產環境必須\n- **Environment Variables**:\n  - 敏感資料使用 `.env`（已在 `.gitignore`）\n  - 公開變數使用 `NUXT_PUBLIC_` 前綴\n- **Dependency Security**:\n  - Yarn audit 定期掃描\n  - Dependabot alerts 監控\n\n#### Compliance Standards\n*由具體專案需求決定，模板提供基礎支援：*\n- **GDPR**: Cookie consent 需自行實現\n- **Privacy**: i18n 支援隱私政策多語系\n- **Accessibility**: 需遵循 WCAG 2.1 AA 標準\n\n#### Threat Model\n- **XSS 防護**: Vue 自動 HTML escaping\n- **CSRF**: 需整合 backend CSRF token\n- **依賴漏洞**: Yarn audit + GitHub Dependabot\n- **Secrets 洩漏**: `.env` 已加入 `.gitignore`\n\n### Scalability & Reliability\n\n#### Expected Load\n*前端起始模板，實際負載由部署方式決定：*\n- **SSG Mode**: 可處理極高流量（靜態檔案）\n- **SSR Mode**: 依伺服器配置（建議使用 CDN + Edge caching）\n- **Client-side**: 記憶體使用 < 50MB（初始狀態）\n\n#### Availability Requirements\n- **Static Mode**: 99.9%+（依託管平台）\n- **SSR Mode**: 需配置 load balancing 與 health checks\n\n#### Growth Projections\n- **Code Splitting**: 自動按路由分割\n- **Lazy Loading**: 支援元件與路由懶載入\n- **Asset Optimization**: 圖片壓縮、tree-shaking、minification\n- **CDN**: 建議使用 CDN 加速靜態資源\n\n## Technical Decisions & Rationale\n\n### Decision Log\n\n1. **選擇 Nuxt 4 而非 Next.js**\n   - **理由**:\n     - Vue 生態系更符合團隊技術棧\n     - Nuxt 提供更簡潔的配置體驗\n     - 內建 SSR/SSG/SPA 多模式切換\n     - 檔案式路由自動化\n   - **替代方案**: Next.js (React)、SvelteKit\n   - **權衡**:\n     - 優點：開發體驗佳、學習曲線平緩\n     - 缺點：社群相對 React 生態較小\n\n2. **採用 Tailwind CSS v4 而非 v3**\n   - **理由**:\n     - 使用最新 PostCSS 整合（`@tailwindcss/postcss`）\n     - 更好的效能與開發體驗\n     - 簡化配置檔案\n   - **替代方案**: Tailwind v3、UnoCSS、Windi CSS\n   - **權衡**:\n     - 優點：最新特性、未來保障\n     - 缺點：生態系插件可能尚未完全支援 v4\n\n3. **Feature-based 架構而非傳統 MVC**\n   - **理由**:\n     - 功能模組高內聚、低耦合\n     - 易於團隊協作（功能邊界清晰）\n     - 支援 Figma 轉代碼工作流程（元件就近放置）\n     - 易於測試與維護\n   - **替代方案**: MVC、分層架構、Atomic Design\n   - **權衡**:\n     - 優點：可維護性高、擴展性強\n     - 缺點：小型專案可能過度設計\n\n4. **選擇 Pinia 而非 Vuex**\n   - **理由**:\n     - 官方推薦（Vue 3 時代）\n     - TypeScript 支援更佳\n     - API 更簡潔（無 mutations）\n     - 更好的 DevTools 整合\n   - **替代方案**: Vuex 4、直接使用 Composition API\n   - **權衡**:\n     - 優點：輕量、型別安全、開發體驗佳\n     - 缺點：Vuex 舊專案遷移成本\n\n5. **使用 Yarn 4 (Berry) 而非 npm/pnpm**\n   - **理由**:\n     - Plug'n'Play 模式提升安裝速度\n     - Workspace 管理能力強\n     - 更好的 monorepo 支援（未來擴展）\n   - **替代方案**: npm、pnpm\n   - **權衡**:\n     - 優點：效能佳、功能豐富\n     - 缺點：部分 IDE 需額外配置（PnP SDK）\n\n6. **整合 PWA 支援**\n   - **理由**:\n     - 提升使用者體驗（離線存取、快速載入）\n     - App-like 體驗（可安裝）\n     - 未來移動端擴展基礎\n   - **替代方案**: 純 Web App\n   - **權衡**:\n     - 優點：增強功能、更好的快取控制\n     - 缺點：增加複雜度、需額外測試\n\n7. **使用 Husky + lint-staged 自動化程式碼品質**\n   - **理由**:\n     - Pre-commit 自動檢查避免低品質提交\n     - 團隊統一程式碼風格\n     - CI/CD 失敗率降低\n   - **替代方案**: 手動 lint、CI-only 檢查\n   - **權衡**:\n     - 優點：即時反饋、強制品質\n     - 缺點：提交速度略慢（毫秒級）\n\n8. **啟用 Nuxt 實驗性功能**\n   - **`typedPages: true`**: 型別安全路由\n   - **`renderJsonPayloads: true`**: 優化 payload 渲染\n   - **`payloadExtraction: false`**: 修復 SSG 離線問題\n   - **理由**: 提前採用未來標準功能\n   - **風險**: API 可能變更（需追蹤 Nuxt 更新）\n\n## Known Limitations\n\n### 1. Tailwind CSS v4 生態系相容性\n- **描述**: 部分 Tailwind v3 插件尚未支援 v4\n- **影響**:\n  - `@tailwindcss/forms`、`@tailwindcss/typography` 等官方插件需等待更新\n  - 第三方 UI 函式庫可能需要額外配置\n- **解決方案**:\n  - 追蹤官方 roadmap\n  - 需要時使用自定義 CSS 或回退至 v3\n- **預計解決時間**: 2025 Q1-Q2\n\n### 2. 缺少測試框架配置\n- **描述**: 未預配置單元測試與 E2E 測試\n- **影響**:\n  - 團隊需自行整合 Vitest/Jest\n  - 缺少測試範例與最佳實踐\n- **解決方案**:\n  - 整合 Vitest + @vue/test-utils\n  - 整合 Playwright (已有 MCP 基礎)\n  - 建立測試模板與文檔\n- **預計解決時間**: 未來版本\n\n### 3. 無後端 API 層實現\n- **描述**: 僅提供前端模板，API 層需自行實現\n- **影響**:\n  - `app/features/*/api/` 僅為空架構\n  - 需團隊根據後端技術自行實現\n- **解決方案**:\n  - 提供 API 層範例（fetch/axios）\n  - 整合 Nuxt Server API routes\n  - 文檔說明 API 整合最佳實踐\n- **預計解決時間**: 依專案需求\n\n### 4. i18n 配置需額外設置\n- **描述**: 雖已安裝 @nuxtjs/i18n，但未提供語言檔案與完整配置\n- **影響**:\n  - 多語系功能需額外配置才能使用\n  - 缺少語言切換 UI 範例\n- **解決方案**:\n  - 建立 `locales/` 目錄結構\n  - 提供語言檔案範例（en、zh-TW）\n  - 建立語言切換元件\n- **預計解決時間**: 未來版本\n\n### 5. PWA 圖標需手動生成\n- **描述**: PWA manifest 已配置，但圖標檔案需手動準備\n- **影響**:\n  - `pwa-192x192.png`、`pwa-512x512.png`、`maskable-icon.png` 需自行生成\n  - 開發時會有 404 錯誤（不影響功能）\n- **解決方案**:\n  - 使用 PWA Asset Generator 工具\n  - 提供預設佔位圖標\n- **預計解決時間**: 未來版本\n\n### 6. Nuxt 4 處於 Beta 階段\n- **描述**: Nuxt 4 仍在快速迭代中，API 可能變更\n- **影響**:\n  - Breaking changes 風險\n  - 部分功能文檔不完整\n  - 第三方模組相容性問題\n- **解決方案**:\n  - 透過 `resolutions` 鎖定版本\n  - 追蹤官方 changelog 與 migration guide\n  - 謹慎升級，充分測試\n- **預計解決時間**: Nuxt 4 正式版發布（2025 H1 預期）\n\n### 7. 缺少 CI/CD 配置\n- **描述**: 未提供 GitHub Actions、GitLab CI 等 workflow 檔案\n- **影響**:\n  - 團隊需自行建立 CI/CD pipeline\n  - 缺少自動化測試、建置、部署流程\n- **解決方案**:\n  - 提供 GitHub Actions workflow 範例\n  - 整合 Vercel/Netlify 自動部署\n  - 文檔說明 CI/CD 最佳實踐\n- **預計解決時間**: 未來版本\n\n### 8. Accessibility 需額外實作\n- **描述**: 未強制執行無障礙標準（WCAG）\n- **影響**:\n  - 需手動確保 ARIA 標籤、鍵盤導航等\n  - 缺少 a11y 檢查工具\n- **解決方案**:\n  - 整合 eslint-plugin-vuejs-accessibility\n  - 整合 axe-core 或 Pa11y\n  - 提供無障礙元件範例\n- **預計解決時間**: 依專案需求\n\n### 9. 環境變數管理需規範\n- **描述**: 未提供 `.env.example` 檔案\n- **影響**:\n  - 團隊成員不清楚需要哪些環境變數\n  - 缺少環境變數命名規範\n- **解決方案**:\n  - 建立 `.env.example`\n  - 文檔說明 Nuxt 環境變數規則（`NUXT_PUBLIC_` 前綴）\n- **預計解決時間**: 未來版本\n\n### 10. 效能監控工具未整合\n- **描述**: 缺少 Web Vitals 追蹤、錯誤監控（Sentry）\n- **影響**:\n  - 無法追蹤生產環境效能\n  - 錯誤難以追溯\n- **解決方案**:\n  - 整合 @nuxtjs/web-vitals\n  - 整合 Sentry/LogRocket\n  - 提供分析工具整合範例\n- **預計解決時間**: 依專案需求\n",
  "fileStats": {
    "size": 18652,
    "lines": 561,
    "lastModified": "2025-11-10T05:37:34.376Z"
  },
  "comments": []
}